/* =========================
   共通：カラーバー（降水・突風）
   ========================= */
.colorbar {
  width: 92%;
  height: 8px;
  margin: 0 auto;
  border-radius: 6px;
  border: 1px solid #bbb;
  display: flex;
  overflow: hidden;
  position: relative;
}

/* 既存のIDにも共通スタイルを適用 */
#precip-colorbar { width: 92%; height: 8px; margin: 0 auto; border-radius: 6px; border: 1px solid #bbb; display: flex; overflow: hidden; position: relative; }
#gust-colorbar   { width: 92%; height: 8px; margin: 6px auto 0 auto; border-radius: 6px; border: 1px solid #bbb; display: flex; overflow: hidden; position: relative; }

/* 共通ブロック */
.colorbar-block,
.precip-colorbar-block { /* 後方互換（JSが古いクラスでもOKに） */
  flex: 1 1 0;
  height: 100%;
}

/* 共通：ラベル行（子spanはabsoluteで配置） */
.colorbar-labels {
  font-size: 10px;
  color: #333;
  pointer-events: none;
  width: 92%;
  margin: 0 auto;
  line-height: 1.0;
  position: relative;
  height: 12px;
  /* 表示切替はJSで block/none にする */
}

.colorbar-block.transparent {
  background: repeating-conic-gradient(#ccc 0% 25%, transparent 0% 50%) 
              50% / 8px 8px;
}

/* 既存のIDにも共通ラベルスタイルを適用 */
#precip-colorbar-labels { font-size: 10px; color: #333; pointer-events: none; width: 92%; margin: 0 auto; line-height: 1.0; position: relative; height: 12px; }
#gust-colorbar-labels   { font-size: 10px; color: #333; pointer-events: none; width: 92%; margin: 0 auto; line-height: 1.0; position: relative; height: 12px; }

/* =========================
   レイアウト：左にサイドバー、右に地図
   ========================= */
html, body, #app { height: 100%; margin: 0; }
#app { display: flex; position: relative; }

/* サイドバー */
#sidebar {
  width: 260px;
  padding: 12px;
  background: #f6f6f6;
  border-right: 1px solid #ddd;
  overflow: auto;
  font-family: system-ui, sans-serif;
  position: relative;
  z-index: 2; /* 地図より前面 */
  transition: width .25s ease, padding .25s ease;
}

#sidebar.collapsed {
  width: 0;
  padding: 0;
  overflow: hidden;  /* 中身を隠す */
  border-right: none;
}

/* 入力UIアクセント色 */
input[type="checkbox"] { accent-color: #394e86; }
input[type="range"]    { accent-color: #394e86; }

/* トグルボタン（サイドバー端に沿わせる） */
#sidebar-toggle {
  position: absolute;
  top: 10px;
  left: 292px;     /* = サイドバー幅(260) + 余白 */
  z-index: 3;
  border: 1px solid #ccc;
  background: #fff;
  padding: 6px 8px;
  border-radius: 6px;
  cursor: pointer;
  user-select: none;
  transition: left .25s ease; /* サイドバーと一緒にスライド */
}

/* サイドバーが畳まれたときのボタン位置・表示 */
#sidebar.collapsed + #sidebar-toggle { left: 10px; }

#sidebar h3 { margin: 8px 0; font-size: 16px; }
#sidebar label { display: inline-flex; gap: 6px; align-items: center; margin: 4px 0; }

#sidebar-title {
  font-size: 18px;
  font-weight: bold;
  color: #ffffff;
  text-align: center;
  padding: 12px 8px;
  background: #394e86;
  border-bottom: 1px solid #ccc;
  margin: -12px -12px 12px -12px;
}

/* 横並び＋中央寄せの行 */
#sidebar .typhoon-row{
  display:flex;
  align-items:flex-end;     /* 下端揃え（好みで center でも） */
  gap:12px;
  flex-wrap:nowrap;         /* 幅が足りない時に折り返したいなら wrap に */
  margin:6px 0 12px;
}

/* 各フィールドの箱（縦積み：ラベル→セレクト） */
#sidebar .typhoon-row .field-year{
  display:flex; flex-direction:column;
  min-width: 2.5em;        /* お好みで調整 */
}
#sidebar .typhoon-row .field-number{
  display:flex; flex-direction:column;
  min-width: 8.5em;        /* お好みで調整 */
}

/* 小さな左上ラベル（添付イメージ風） */
#sidebar .typhoon-row .field-label{
  font-size: 12px;
  line-height: 1.1;
  color:#888;
  margin: 6px 4px 0;        /* 左に少し余白 */
  user-select:none;
}

/* 地図エリア */
#map {
  flex: 1;
  min-width: 0;
  position: relative;
  z-index: 1; /* サイドバーより背面 */
}

/* スライダーのラベル */
#time-row { margin-top: 8px; text-align: center; }
#time {
  width: 100%;      /* サイドバー幅に合わせて最大に伸ばす */
  box-sizing: border-box;
}
#time-label { margin-top: 4px; text-align: center; }

#label { white-space: nowrap; margin-left: 0; }

#typhoon-link { margin-top: 8px; }
#typhoon-link a { color: #0066cc; text-decoration: none; }
#typhoon-link a:hover { text-decoration: underline; }

.maplibregl-canvas { cursor: default !important; }

/* 下線のみのセレクト */
.select-underline{
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background:transparent;
  border:none; border-bottom:2px solid #c7c7c7; border-radius:0;
  padding:2px 28px 2px 4px;
  width:100%;
  font:inherit; color:inherit; line-height:1.3; cursor:pointer;

  /* 右側のカスタム矢印 */
  background-image: url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23666' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'>\
  <polyline points='3,4 6,7 9,4'/></svg>");
  background-repeat:no-repeat;
  background-position:right 6px center;
  background-size:12px 12px;

  transition:border-color .15s ease, color .15s ease, background-color .15s ease;
}
.select-underline:hover{ border-bottom-color:#999; }
.select-underline:focus-visible{ outline:none; border-bottom-color:#1a73e8; }
.select-underline:disabled{ opacity:.6; cursor:not-allowed; }

/* アクセシビリティ対策 */
@media (forced-colors: active){
  .select-underline{ background-image:none; border:1px solid CanvasText; }
}
.select-underline::-ms-expand{ display:none; }

/* （任意）狭幅時は折り返しにする */
@media (max-width: 380px){
  #sidebar .typhoon-row{ flex-wrap:wrap; }
}

/* 初期ロード時のチラ見え防止（gustはデフォ非表示） */
#gust-colorbar,
#gust-colorbar-labels {
  display: none;
}
